<div id="dimpvis_preferences">

    <h2 class="page-header">Preferences</h2>

    <p>You have now completed visualization tasks. Please answer the following questions regarding your experience.</p>

    <div id="static_interpret" class="form-group">
        <h4 class="question">Question</h4>
        <strong>Which visualization is most effective for you?</strong>

        <div id="effective">
            <div class="radio"><label><input type="radio" id="d1" name="effective" value="1"> DimpVis</label></div>
            <div class="radio"><label><input type="radio" id="d2" name="effective" value="2"> Small Multiples</label></div>
            <div class="radio"><label><input type="radio" id="d3" name="effective" value="3"> Time Sliders</label></div>
        </div>
        <strong>Which visualization is most interesting for you?</strong>

        <div id="interesting">
            <div class="radio"><label><input type="radio" id="d1" name="interesting" value="1"> DimpVis</label></div>
            <div class="radio"><label><input type="radio" id="d2" name="interesting" value="2"> Small Multiples</label></div>
            <div class="radio"><label><input type="radio" id="d3" name="interesting" value="3"> Time Sliders</label></div>
        </div>
        <strong>Which visualization make you most confident about your answer?</strong>

        <div id="confident">
            <div class="radio"><label><input type="radio" id="d1" name="confident" value="1"> DimpVis</label></div>
            <div class="radio"><label><input type="radio" id="d2" name="confident" value="2"> Small Multiples</label></div>
            <div class="radio"><label><input type="radio" id="d3" name="confident" value="3"> Time Sliders</label></div>
        </div>
    </div>
</div>

<script>
    (function() {
        var data = {};

        experimentr.startTimer('preferences');

        d3.selectAll('input')
            .filter(function(d) {
                return this.name === 'interesting' ? this : null;
            })
            .on('change', function() {
                data.interesting = this.value;
                validate();
            });

        d3.selectAll('input')
            .filter(function(d) {
                return this.name === 'effective' ? this : null;
            })
            .on('change', function() {
                data.effective = this.value;
                validate();
            });

        d3.selectAll('input')
            .filter(function(d) {
                return this.name === 'confident' ? this : null;
            })
            .on('change', function() {
                data.confident = this.value;
                validate();
            });

        function validate() {
            if (interesting && effective && confident) {
                experimentr.endTimer('preferences');
                experimentr.addData(data);
                experimentr.release();
            }
        }
    }());
</script>